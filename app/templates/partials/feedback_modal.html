<button
  id="feedback-btn"
  class="fixed bottom-6 right-6 z-40 bg-white p-3 rounded-full shadow-lg border border-purple-100 text-purple-600 hover:scale-110 transition-transform group"
  title="意见反馈"
>
  <span class="text-2xl group-hover:animate-spin-slow">💬</span>
</button>

<div
  id="feedback-modal"
  class="fixed inset-0 z-50 hidden flex items-center justify-center bg-gray-900/40 backdrop-blur-sm opacity-0 transition-opacity duration-300"
>
  <div
    class="bg-white rounded-2xl shadow-2xl p-6 w-[90%] max-w-md transform scale-95 transition-transform duration-300"
    id="feedback-card"
  >
    <div class="flex justify-between items-center mb-4">
      <h3 class="text-xl font-bold text-gray-800">您觉得这个测试准吗？</h3>
      <button id="close-feedback" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
    </div>

    <div class="flex justify-center gap-2 mb-6" id="star-container">
      <button data-val="1" class="star-btn text-3xl text-gray-300 hover:text-yellow-400 transition-colors">★</button>
      <button data-val="2" class="star-btn text-3xl text-gray-300 hover:text-yellow-400 transition-colors">★</button>
      <button data-val="3" class="star-btn text-3xl text-gray-300 hover:text-yellow-400 transition-colors">★</button>
      <button data-val="4" class="star-btn text-3xl text-gray-300 hover:text-yellow-400 transition-colors">★</button>
      <button data-val="5" class="star-btn text-3xl text-gray-300 hover:text-yellow-400 transition-colors">★</button>
    </div>

    <textarea
      id="feedback-content"
      rows="3"
      placeholder="(选填) 告诉我们需要改进的地方..."
      class="w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none text-sm mb-4"
    ></textarea>

    <input type="hidden" id="server-mbti-type" value="{{ request.query_params.get('type', '') }}" />

    <button
      id="submit-feedback-btn"
      class="w-full py-3 rounded-xl font-bold text-white bg-gradient-to-r from-purple-600 to-pink-600 shadow-md hover:shadow-lg hover:opacity-90 transition-all"
    >
      提交反馈
    </button>
  </div>
</div>
